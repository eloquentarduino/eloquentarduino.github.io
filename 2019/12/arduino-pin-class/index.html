<!DOCTYPE html>
<html lang="en-US"><head profile="http://gmpg.org/xfn/11"><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no"> <script>function fvmuag(){if(navigator.userAgent.match(/x11.*fox\/54|oid\s4.*xus.*ome\/62|oobot|ighth|tmetr|eadles|ingdo/i))return!1;if(navigator.userAgent.match(/x11.*ome\/75\.0\.3770\.100/i)){var e=screen.width,t=screen.height;if("number"==typeof e&&"number"==typeof t&&862==t&&1367==e)return!1}return!0}</script><title>Eloquent pin management: the Pin class</title><style type="text/css">.heateorSssInstagramBackground{background:radial-gradient(circle at 30% 107%,#fdf497 0,#fdf497 5%,#fd5949 45%,#d6249f 60%,#285aeb 90%)} .heateor_sss_horizontal_sharing .heateorSssSharing,.heateor_sss_standard_follow_icons_container .heateorSssSharing{ color: #fff; border-width: 0px; border-style: solid; border-color: transparent; } .heateor_sss_horizontal_sharing .heateorSssTCBackground{ color:#666; } .heateor_sss_horizontal_sharing .heateorSssSharing:hover,.heateor_sss_standard_follow_icons_container .heateorSssSharing:hover{ border-color: transparent; } .heateor_sss_vertical_sharing .heateorSssSharing,.heateor_sss_floating_follow_icons_container .heateorSssSharing{ color: #fff; border-width: 0px; border-style: solid; border-color: transparent; } .heateor_sss_vertical_sharing .heateorSssTCBackground{ color:#666; } .heateor_sss_vertical_sharing .heateorSssSharing:hover,.heateor_sss_floating_follow_icons_container .heateorSssSharing:hover{ border-color: transparent; } @media screen and (max-width:783px) {.heateor_sss_vertical_sharing{display:none!important}}@media screen and (max-width:783px) {.heateor_sss_floating_follow_icons_container{display:none!important}}div.heateor_sss_mobile_footer{display:none;}@media screen and (max-width:783px){i.heateorSssTCBackground{background-color:white!important}div.heateor_sss_bottom_sharing{width:100%!important;left:0!important;}div.heateor_sss_bottom_sharing li{width:33.333333333333% !important;}div.heateor_sss_bottom_sharing .heateorSssSharing{width: 100% !important;}div.heateor_sss_bottom_sharing div.heateorSssTotalShareCount{font-size:1em!important;line-height:28px!important}div.heateor_sss_bottom_sharing div.heateorSssTotalShareText{font-size:.7em!important;line-height:0px!important}div.heateor_sss_mobile_footer{display:block;height:40px;}.heateor_sss_bottom_sharing{padding:0!important;display:block!important;width: auto!important;bottom:-2px!important;top: auto!important;}.heateor_sss_bottom_sharing .heateor_sss_square_count{line-height: inherit;}.heateor_sss_bottom_sharing .heateorSssSharingArrow{display:none;}.heateor_sss_bottom_sharing .heateorSssTCBackground{margin-right: 1.1em !important}}div.heateor_sss_sharing_title{text-align:center}ul.heateor_sss_sharing_ul{width:100%;text-align:center;}div.heateor_sss_horizontal_sharing ul.heateor_sss_sharing_ul li{float:none!important;display:inline-block;}</style><meta name="description" content="A sane pin manipulation class. Please, stop writing horrible code like `digitalWrite(led, HIGH)` and start writing `led.turnOn()` instead."><meta name="robots" content="max-snippet:-1, max-image-preview:large, max-video-preview:-1"><meta property="og:locale" content="en_US"><meta property="og:type" content="article"><meta property="og:title" content="Pin manipulation made easy"><meta property="og:description" content="Stop writing horrible code like `digitalWrite(led, HIGH)` and start writing `led.turnOn()` instead."><meta property="og:url" content="https://eloquentarduino.github.io/2019/12/arduino-pin-class/"><meta property="og:site_name" content="Eloquent Arduino Blog"><meta property="article:section" content="Eloquent library"><meta property="article:published_time" content="2019-12-06T16:15:13+00:00"><meta property="article:modified_time" content="2020-01-25T16:15:54+00:00"><meta property="og:updated_time" content="2020-01-25T16:15:54+00:00"><meta name="twitter:card" content="summary_large_image"><meta name="twitter:description" content="Stop writing horrible code like `digitalWrite(led, HIGH)` and start writing `led.turnOn()` instead."><meta name="twitter:title" content="Pin manipulation made easy"> <script type="application/ld+json" class="yoast-schema-graph yoast-schema-graph--main">{"@context":"https://schema.org","@graph":[{"@type":["Person","Organization"],"@id":"https://eloquentarduino.github.io/#/schema/person/c35265597251f0133ecca5b413d12901","name":"simone","image":{"@type":"ImageObject","@id":"https://eloquentarduino.github.io/#personlogo","url":"https://eloquentarduino.github.io/wp-content/uploads/2019/12/avatar.jpg","width":330,"height":330,"caption":"simone"},"logo":{"@id":"https://eloquentarduino.github.io/#personlogo"},"sameAs":[]},{"@type":"WebSite","@id":"https://eloquentarduino.github.io/#website","url":"https://eloquentarduino.github.io/","name":"Eloquent Arduino Blog","description":"Machine learning on Arduino, programming & electronics","publisher":{"@id":"https://eloquentarduino.github.io/#/schema/person/c35265597251f0133ecca5b413d12901"},"potentialAction":{"@type":"SearchAction","target":"https://eloquentarduino.github.io/?s={search_term_string}","query-input":"required name=search_term_string"}},{"@type":"WebPage","@id":"https://eloquentarduino.github.io/2019/12/arduino-pin-class/#webpage","url":"https://eloquentarduino.github.io/2019/12/arduino-pin-class/","inLanguage":"en-US","name":"Eloquent pin management: the Pin class","isPartOf":{"@id":"https://eloquentarduino.github.io/#website"},"datePublished":"2019-12-06T16:15:13+00:00","dateModified":"2020-01-25T16:15:54+00:00","description":"A sane pin manipulation class. Please, stop writing horrible code like `digitalWrite(led, HIGH)` and start writing `led.turnOn()` instead."},{"@type":"Article","@id":"https://eloquentarduino.github.io/2019/12/arduino-pin-class/#article","isPartOf":{"@id":"https://eloquentarduino.github.io/2019/12/arduino-pin-class/#webpage"},"author":{"@id":"https://eloquentarduino.github.io/#/schema/person/c35265597251f0133ecca5b413d12901"},"headline":"Eloquent pin management: the Pin class","datePublished":"2019-12-06T16:15:13+00:00","dateModified":"2020-01-25T16:15:54+00:00","commentCount":0,"mainEntityOfPage":{"@id":"https://eloquentarduino.github.io/2019/12/arduino-pin-class/#webpage"},"publisher":{"@id":"https://eloquentarduino.github.io/#/schema/person/c35265597251f0133ecca5b413d12901"},"articleSection":"Eloquent library"}]}</script> <link rel="stylesheet" id="wilson_fonts-css" href="https://fonts.googleapis.com/css?family=Lato%3A400%2C700%2C400italic%2C700italic&ver=1" type="text/css" media="all"><link rel="stylesheet" id="fvm-header-0-css" href="https://eloquentarduino.github.io/wp-content/uploads/cache/fvm/1580312644/out/header-f6a724f3.min.css" type="text/css" media="all"><link rel="stylesheet" id="font-awesome-official-css" href="https://use.fontawesome.com/releases/v5.12.0/css/all.css" type="text/css" media="all" integrity="sha384-REHJTs1r2ErKBuJB0fCK99gCYsVjwxHrSU0N7I1zl9vZbggVJXRMsv/sLlOAGb4M" crossorigin="anonymous"><link rel="stylesheet" id="fvm-header-2-css" href="https://eloquentarduino.github.io/wp-content/uploads/cache/fvm/1580312644/out/header-78c5306e.min.css" type="text/css" media="all"><link rel="stylesheet" id="font-awesome-official-v4shim-css" href="https://use.fontawesome.com/releases/v5.12.0/css/v4-shims.css" type="text/css" media="all" integrity="sha384-AL44/7DEVqkvY9j8IjGLGZgFmHAjuHa+2RIWKxDliMNIfSs9g14/BRpYwHrWQgz6" crossorigin="anonymous"><style id="font-awesome-official-v4shim-inline-css" type="text/css">@font-face { font-family: "FontAwesome"; src: url("https://use.fontawesome.com/releases/v5.12.0/webfonts/fa-brands-400.eot"), url("https://use.fontawesome.com/releases/v5.12.0/webfonts/fa-brands-400.eot?#iefix") format("embedded-opentype"), url("https://use.fontawesome.com/releases/v5.12.0/webfonts/fa-brands-400.woff2") format("woff2"), url("https://use.fontawesome.com/releases/v5.12.0/webfonts/fa-brands-400.woff") format("woff"), url("https://use.fontawesome.com/releases/v5.12.0/webfonts/fa-brands-400.ttf") format("truetype"), url("https://use.fontawesome.com/releases/v5.12.0/webfonts/fa-brands-400.svg#fontawesome") format("svg"); } @font-face { font-family: "FontAwesome"; src: url("https://use.fontawesome.com/releases/v5.12.0/webfonts/fa-solid-900.eot"), url("https://use.fontawesome.com/releases/v5.12.0/webfonts/fa-solid-900.eot?#iefix") format("embedded-opentype"), url("https://use.fontawesome.com/releases/v5.12.0/webfonts/fa-solid-900.woff2") format("woff2"), url("https://use.fontawesome.com/releases/v5.12.0/webfonts/fa-solid-900.woff") format("woff"), url("https://use.fontawesome.com/releases/v5.12.0/webfonts/fa-solid-900.ttf") format("truetype"), url("https://use.fontawesome.com/releases/v5.12.0/webfonts/fa-solid-900.svg#fontawesome") format("svg"); } @font-face { font-family: "FontAwesome"; src: url("https://use.fontawesome.com/releases/v5.12.0/webfonts/fa-regular-400.eot"), url("https://use.fontawesome.com/releases/v5.12.0/webfonts/fa-regular-400.eot?#iefix") format("embedded-opentype"), url("https://use.fontawesome.com/releases/v5.12.0/webfonts/fa-regular-400.woff2") format("woff2"), url("https://use.fontawesome.com/releases/v5.12.0/webfonts/fa-regular-400.woff") format("woff"), url("https://use.fontawesome.com/releases/v5.12.0/webfonts/fa-regular-400.ttf") format("truetype"), url("https://use.fontawesome.com/releases/v5.12.0/webfonts/fa-regular-400.svg#fontawesome") format("svg"); unicode-range: U+F004-F005,U+F007,U+F017,U+F022,U+F024,U+F02E,U+F03E,U+F044,U+F057-F059,U+F06E,U+F070,U+F075,U+F07B-F07C,U+F080,U+F086,U+F089,U+F094,U+F09D,U+F0A0,U+F0A4-F0A7,U+F0C5,U+F0C7-F0C8,U+F0E0,U+F0EB,U+F0F3,U+F0F8,U+F0FE,U+F111,U+F118-F11A,U+F11C,U+F133,U+F144,U+F146,U+F14A,U+F14D-F14E,U+F150-F152,U+F15B-F15C,U+F164-F165,U+F185-F186,U+F191-F192,U+F1AD,U+F1C1-F1C9,U+F1CD,U+F1D8,U+F1E3,U+F1EA,U+F1F6,U+F1F9,U+F20A,U+F247-F249,U+F24D,U+F254-F25B,U+F25D,U+F267,U+F271-F274,U+F279,U+F28B,U+F28D,U+F2B5-F2B6,U+F2B9,U+F2BB,U+F2BD,U+F2C1-F2C2,U+F2D0,U+F2D2,U+F2DC,U+F2ED,U+F328,U+F358-F35B,U+F3A5,U+F3D1,U+F410,U+F4AD; }</style> <script type="text/javascript" src="https://eloquentarduino.github.io/wp-content/uploads/cache/fvm/1580312644/out/header-84e60a2d.min.js"></script><style type="text/css">0</style><meta name="google-site-verification" content="xgigjPrbbYDemskTaGLT9WGhmw8wgdeFtpDxVak0awI"><link href="/assets/app.css" rel="stylesheet"> <style type="text/css"></style></head><body class="post-template-default single single-post postid-167 single-format-standard"><div class="wrapper"><div class="sidebar"><div class="blog-header"> <a class="blog-logo" href="https://eloquentarduino.github.io" title="Eloquent Arduino Blog — Machine learning on Arduino, programming & electronics" rel="home"> <img src="https://eloquentarduino.github.io/wp-content/uploads/2019/12/logo-completo.png" alt="Eloquent Arduino Blog"> </a></div><div class="nav-toggle toggle"><p> <span class="show">Show menu</span> <span class="hide">Hide menu</span></p><div class="bars"><div class="bar"></div><div class="bar"></div><div class="bar"></div><div class="clear"></div></div></div><div class="blog-menu"><ul class="navigation"><li id="menu-item-461" class="menu-item menu-item-type-taxonomy menu-item-object-category menu-item-461"><a href="https://eloquentarduino.github.io/category/programming/arduino-machine-learning/">Arduino Machine learning</a></li><li id="menu-item-462" class="menu-item menu-item-type-taxonomy menu-item-object-category current-post-ancestor current-menu-parent current-post-parent menu-item-462"><a href="https://eloquentarduino.github.io/category/programming/eloquent-library/">Eloquent library</a></li></ul><div class="clear"></div></div><div class="mobile-menu"><ul class="navigation"><li class="menu-item menu-item-type-taxonomy menu-item-object-category menu-item-461"><a href="https://eloquentarduino.github.io/category/programming/arduino-machine-learning/">Arduino Machine learning</a></li><li class="menu-item menu-item-type-taxonomy menu-item-object-category current-post-ancestor current-menu-parent current-post-parent menu-item-462"><a href="https://eloquentarduino.github.io/category/programming/eloquent-library/">Eloquent library</a></li></ul></div><div class="widgets" role="complementary"><div class="widget widget_search"><div class="widget-content"><form method="get" class="searchform" action="https://eloquentarduino.github.io" id="searchform"><div role="search" class="searchbox__wrapper"> <input id="search-input" type="search" name="search" placeholder="Search the blog" autocomplete="off" required="required" class="searchbox__input"> <button type="submit" title="Submit your search query." class="searchbox__submit"> <svg role="img" aria-label="Search"> <use xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="#sbx-icon-search-13"></use> </svg> </button> <button type="reset" title="Clear the search query." class="searchbox__reset hide"> <svg role="img" aria-label="Reset"> <use xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="#sbx-icon-clear-3"></use> </svg> </button></div></form></div><div class="clear"></div></div><div class="widget widget_recent_entries"><div class="widget-content"><h3 class="widget-title">Recent Posts</h3><ul><li> <a href="https://eloquentarduino.github.io/2020/01/easy-tinyml-on-esp32-and-arduino/">Easy TinyML on ESP32 and Arduino</a></li><li> <a href="https://eloquentarduino.github.io/2020/01/image-recognition-with-esp32-and-arduino/">Apple or Orange? Image recognition with ESP32 and Arduino</a></li><li> <a href="https://eloquentarduino.github.io/2020/01/motion-detection-with-esp32-cam-only-arduino-version/">Motion detection with ESP32 cam only (Arduino version)</a></li><li> <a href="https://eloquentarduino.github.io/2019/12/machine-learning-on-attiny85/">Embedded Machine learning on Attiny85</a></li><li> <a href="https://eloquentarduino.github.io/2019/12/word-classification-using-arduino/">Word classification using Arduino and MicroML</a></li></ul></div><div class="clear"></div></div><div class="widget widget_sub_categories"><div class="widget-content"><h3 class="widget-title">Programming</h3><ul><li class="cat-item cat-item-8"><a href="https://eloquentarduino.github.io/category/programming/arduino-machine-learning/">Arduino Machine learning</a></li><li class="cat-item cat-item-12"><a href="https://eloquentarduino.github.io/category/programming/computer-vision/">Computer vision</a></li><li class="cat-item cat-item-7"><a href="https://eloquentarduino.github.io/category/programming/eloquent-library/">Eloquent library</a></li></ul></div><div class="clear"></div></div><div class="widget widget_tag_cloud"><div class="widget-content"><h3 class="widget-title">TAGS</h3><div class="tagcloud"><a href="https://eloquentarduino.github.io/tag/camera/" class="tag-cloud-link tag-link-11 tag-link-position-1" style="font-size: 8pt;" aria-label="camera (2 items)">camera</a> <a href="https://eloquentarduino.github.io/tag/eloquent/" class="tag-cloud-link tag-link-4 tag-link-position-2" style="font-size: 11pt;" aria-label="eloquent (3 items)">eloquent</a> <a href="https://eloquentarduino.github.io/tag/esp32/" class="tag-cloud-link tag-link-10 tag-link-position-3" style="font-size: 8pt;" aria-label="esp32 (2 items)">esp32</a> <a href="https://eloquentarduino.github.io/tag/microml/" class="tag-cloud-link tag-link-5 tag-link-position-4" style="font-size: 22pt;" aria-label="microml (10 items)">microml</a></div></div><div class="clear"></div></div></div></div><div class="content"><div class="posts"><div id="post-167" class="post-167 post type-post status-publish format-standard hentry category-eloquent-library"><div class="post-inner"><div class="post-header"><h1 class="post-title"><a href="https://eloquentarduino.github.io/2019/12/arduino-pin-class/" rel="bookmark" title="Eloquent pin management: the Pin class">Eloquent pin management: the Pin class</a></h1><div class="post-meta"> <span class="post-date"><a href="https://eloquentarduino.github.io/2019/12/arduino-pin-class/" title="Eloquent pin management: the Pin class">6 December 2019</a></span> <span class="date-sep"> / </span> <span class="post-author"><a href="https://eloquentarduino.github.io/author/simone/" title="Posts by simone" rel="author">simone</a></span></div></div><div class="post-content"><div class="has-content-area" data-url="https://eloquentarduino.github.io/2019/12/arduino-pin-class/" data-title="Eloquent pin management: the Pin class"><p><code>Pin</code> is a class for pin manipulation: you can read, write, turnOn, turnOff, toggle and a lot more. Please, stop writing horrible code like <code>digitalWrite(led, HIGH)</code> and start writing <code>led.turnOn()</code> instead.</p><p><span id="more-167"></span></p><p><code>Pin</code> is actually an abstract class, so you won't use it directly, but through its specialized implementations:</p><ol><li>DigitalIn</li><li>DigitalOut</li><li>AnalogIn</li><li>AnalogOut</li></ol><h2>Import the library</h2><div class="watchout">To follow this tutorial along you need to first <a href="/2019/12/how-to-install-the-eloquent-library/" target="_blank" rel="noopener noreferrer">install the Eloquent library</a></div><pre><code class="language-cpp">#import <eIO.h>

using namespace Eloquent::Pin;</code></pre><p>If the namespace stuff is new to you, here I'll briefly say that it is used to avoid name collisions among different libraries. This seems to be an alien topic in the Arduino world and I can't really explain why.</p><p>99% of the libraries out there deal with this problem in one of two modes:</p><ol><li>ignoring it altogether, so you have an <code>MPU6050.h</code> library, which elects itself as the only one implementation possible to access the MPU6050 accelerometer in the world</li><li>prefixing each library file, so you get the <code>Adafruit_Si7021</code> class</li></ol> <span class="bctt-click-to-tweet"><span class="bctt-ctt-text"><a href="https://twitter.com/intent/tweet?url=http%3A%2F%2Feloquent.blog%2F2019%2F12%2Farduino-pin-class%2F&text=The%20case%20for%20Adafruit_Si7021%20should%20not%20exist%20in%20my%20opinion%3A%20use%20the%20damn%20namespaces%21&via=EloquentArduino&related=EloquentArduino" target="_blank" rel="noopener noreferrer">The case for Adafruit_Si7021 should not exist in my opinion: use the damn namespaces! </a></span><a href="https://twitter.com/intent/tweet?url=http%3A%2F%2Feloquent.blog%2F2019%2F12%2Farduino-pin-class%2F&text=The%20case%20for%20Adafruit_Si7021%20should%20not%20exist%20in%20my%20opinion%3A%20use%20the%20damn%20namespaces%21&via=EloquentArduino&related=EloquentArduino" target="_blank" class="bctt-ctt-btn" rel="noopener noreferrer">Click To Tweet</a></span><p>With namespaces, it would become:</p><pre><code class="language-cpp">using namespace Adafruit;

Si7021 si;</code></pre><h2>How to use</h2><p>First of all, all the 4 implementations accept a single constructor argument: the pin number.</p><pre><code class="language-cpp"> DigitalOut led(BUILTIN_LED);
 DigitalIn pushButton(10);
 AnalogIn potentiometer(A0);
 AnalogOut pwmLed(8);</code></pre><p>Then it is good practice to init your pins in the setup.</p><pre><code class="language-cpp"> void setup() {
    led.begin();
    pushButton.begin();
    potentiometer.begin();
    pwmLed.begin();
 }</code></pre><p>All the 4 classes let you ask for the pin current value via the <code>value()</code> method:</p><pre><code class="language-cpp"> void test() {
    // DigitalIn returns the last read value, as 0/1
    digitalIn.value();

    // AnalogIn returns the last read value, in the range [0, 1024]
    analogIn.value();

    // DigitalOut returns the last written value, as 0/1
    digitalOut.value();

    // AnaloglOut returns the last written value, in the range [0, 255]
    analogOut.value();
 }</code></pre><p>At this point each class will provide its specialized methods.</p><h4>DigitalIn</h4><pre><code class="language-cpp">void test() {
    // configure pin as INPUT_PULLUP
    pin.pullup();

    // configure pin as Active Low 
    // that is, pin is ON when digitalRead() is LOW
    pin.activeLow();

    // read and update pin value
    pin.read();

    // test if pin is on (doesn't read the pin)
    pin.isOn();

    // test if pin is off (doesn't read the pin)
    pin.isOff();

    // test if pin value changed from last reading
    pin.changed();
}</code></pre><h4>DigitalOut</h4><pre><code class="language-cpp">void test() {
    // set pin as Active Low
    // that is, turnOn writes LOW
    pin.activeLow();

    // turn pin on
    pin.turnOn();

    // turn pin off
    pin.turnOff();

    // toggle
    pin.toggle();

    // blink N times at intervals of X milliseconds
    pin.blink(N, X);
}</code></pre><h4>AnalogIn</h4><pre><code class="language-cpp">void test() {
    // read current pin value
    pin.read();

    // get pin previous value
    pin.prev();

    // get difference between current value and previous
    pin.delta();

    // get absolute value of delta()
    pin.absDelta();
}</code></pre><h4>AnalogOut</h4><pre><code class="language-cpp">void test() {
    // write value X to pin
    pin.write(X);
}</code></pre><hr><p>If you don't believe a whole class is worthwhile to work with pins, I'll show a few use cases to illustrate my point.</p><h4>Use case #1: active low LED</h4><p>The ESP8266 has a builtin LED you can control, but it is an <em>active low</em> one: it will turn on when you write <code>LOW</code>. In this case, <code>digitalWrite(BUILTIN_LED, LOW)</code> can be misleading regarding your actual intentions.</p><p>It doesn't look intuitive,  it doesn't look <em>eloquent</em>! <code>builtinLed.turnOn()</code> does, however. All you need to get it working correctly is calling <code>builtinLed.activeLow()</code> once in your setup.</p><pre><code class="language-cpp">// BEFORE
void loop() {
    // to turn the builtin LED on
    digitalWrite(led, LOW);
}</code></pre><pre><code class="language-cpp">// AFTER
DigitalOut buildtinLed;

void setup() {
    builtinLed.activeLow();
}

void loop() {
    // to turn the builtin LED on
    builtinLed.turnOn();
}</code></pre><h4>Use case #2: toggle</h4><p>If you need to toggle the current state of a digital output, you need an helper variable to keep track of the state and remember to <strong>always</strong> update that variable when you write to the output.<br> With a class, the state is tightly bound to the instance, so you have a <a href="https://en.wikipedia.org/wiki/Single_source_of_truth">single source of truth</a>: <code>turnOn()</code>, <code>turnOff()</code> and <code>toggle()</code> will take care of updating the inner state accordingly.</p><pre><code class="language-cpp">// BEFORE
#define LED 1

bool ledState = true;

loop() {
    digitalWrite(LED, ledState);
    ledState = !ledState
}</code></pre><pre><code class="language-cpp">// AFTER
DigitalOut led(1);

void loop() {
    led.toggle();
}</code></pre><h4>Use case #3: analog delta</h4><p>What if you have an analog input and want to know if its valued changed by at least X from your latest reading? You would need an helper variable again.</p><p>Now imagine if you have 5 analog inputs you want to track: you'll end up with 10 variables and of course you have again to <strong>always</strong> keep both in sync.<br> <code>AnalogIn</code> conveniently provides <code>delta()</code> and <code>absDelta()</code> methods that give you the change from the previous reading and will always be in sync. Awesome!</p><pre><code class="language-cpp">// BEFORE
#define INPUT1 A1
#define INPUT2 A2

uint16_t current1, prev1;
uint16_t current2, prev2;

void loop() {
    prev1 = current1;
    current1 = analogRead(INPUT1);
    prev2 = current2;
    current2 = analogRead(INPUT2);

    if (abs(current1 - prev1) > THRESHOLD)
        ...</code></pre><pre><code class="language-cpp">// AFTER
AnalogIn input1(A1), input2(A2);

void loop() {
    input1.read();
    input2.read();

    if (input1.absDelta() > THRESHOLD)
        ...
}</code></pre><br><p>Did you find this tutorial useful? Was is it easy to follow or did I miss something? Let me know in the comments so I can keep improving the blog.</p></div><div class="heateorSssClear"></div><div class="heateor_sss_sharing_container heateor_sss_horizontal_sharing" heateor-sss-data-href="https://eloquentarduino.github.io/2019/12/arduino-pin-class/"><div class="heateor_sss_sharing_title" style="font-weight:bold">Help the blow grow</div><ul class="heateor_sss_sharing_ul"><li class="heateorSssSharingRound"><i style="width:35px;height:35px;border-radius:999px;" alt="Facebook" title="Facebook" class="heateorSssSharing heateorSssFacebookBackground" onclick='heateorSssPopup("https://www.facebook.com/sharer/sharer.php?u=http%3A%2F%2Feloquent.blog%2F2019%2F12%2Farduino-pin-class%2F")'><ss style="display:block;border-radius:999px;" class="heateorSssSharingSvg heateorSssFacebookSvg"></ss></i></li><li class="heateorSssSharingRound"><i style="width:35px;height:35px;border-radius:999px;" alt="Twitter" title="Twitter" class="heateorSssSharing heateorSssTwitterBackground" onclick='heateorSssPopup("http://twitter.com/intent/tweet?via=ArduinoEloquent&text=Pin%20manipulation%20made%20easy&url=http%3A%2F%2Feloquent.blog%2F2019%2F12%2Farduino-pin-class%2F")'><ss style="display:block;border-radius:999px;" class="heateorSssSharingSvg heateorSssTwitterSvg"></ss></i></li><li class="heateorSssSharingRound"><i style="width:35px;height:35px;border-radius:999px;" alt="Linkedin" title="Linkedin" class="heateorSssSharing heateorSssLinkedinBackground" onclick='heateorSssPopup("http://www.linkedin.com/shareArticle?mini=true&url=http%3A%2F%2Feloquent.blog%2F2019%2F12%2Farduino-pin-class%2F&title=Eloquent%20pin%20management%3A%20the%20Pin%20class")'><ss style="display:block;border-radius:999px;" class="heateorSssSharingSvg heateorSssLinkedinSvg"></ss></i></li><li class="heateorSssSharingRound"><i style="width:35px;height:35px;border-radius:999px;" title="More" alt="More" class="heateorSssSharing heateorSssMoreBackground" onclick="heateorSssMoreSharingPopup(this, 'https://eloquentarduino.github.io/2019/12/arduino-pin-class/', 'Eloquent%20pin%20management%3A%20the%20Pin%20class', 'Pin%20manipulation%20made%20easy' )"><ss style="display:block" class="heateorSssSharingSvg heateorSssMoreSvg"></ss></i></li></ul><div class="heateorSssClear"></div></div><div class="heateorSssClear"></div><div class="heateor_sss_sharing_container heateor_sss_vertical_sharing heateor_sss_bottom_sharing" style="width:44px;right: -10px;top: 100px;-webkit-box-shadow:none;box-shadow:none;" heateor-sss-data-href="https://eloquentarduino.github.io/2019/12/arduino-pin-class/"><ul class="heateor_sss_sharing_ul"><li class=""><i style="width:40px;height:40px;margin:0;" alt="Facebook" title="Facebook" class="heateorSssSharing heateorSssFacebookBackground" onclick='heateorSssPopup("https://www.facebook.com/sharer/sharer.php?u=http%3A%2F%2Feloquent.blog%2F2019%2F12%2Farduino-pin-class%2F")'><ss style="display:block;" class="heateorSssSharingSvg heateorSssFacebookSvg"></ss></i></li><li class=""><i style="width:40px;height:40px;margin:0;" alt="Twitter" title="Twitter" class="heateorSssSharing heateorSssTwitterBackground" onclick='heateorSssPopup("http://twitter.com/intent/tweet?via=ArduinoEloquent&text=Pin%20manipulation%20made%20easy&url=http%3A%2F%2Feloquent.blog%2F2019%2F12%2Farduino-pin-class%2F")'><ss style="display:block;" class="heateorSssSharingSvg heateorSssTwitterSvg"></ss></i></li><li class=""><i style="width:40px;height:40px;margin:0;" title="More" alt="More" class="heateorSssSharing heateorSssMoreBackground" onclick="heateorSssMoreSharingPopup(this, 'https://eloquentarduino.github.io/2019/12/arduino-pin-class/', 'Eloquent%20pin%20management%3A%20the%20Pin%20class', 'Pin%20manipulation%20made%20easy' )"><ss style="display:block" class="heateorSssSharingSvg heateorSssMoreSvg"></ss></i></li></ul><div class="heateorSssClear"></div></div><div class="crp_related  "><h3>Related Posts</h3><ul><li><a href="https://eloquentarduino.github.io/2019/11/how-to-write-clean-arduino-code/"><span class="crp_title">How to write clean Arduino code: introducing the Eloquent library</span></a></li><li><a href="https://eloquentarduino.github.io/2019/12/arduino-bounded-waiting/"><span class="crp_title">Eloquent bounded waiting: the await construct</span></a></li><li><a href="https://eloquentarduino.github.io/2019/12/non-blocking-arduino-code/"><span class="crp_title">Eloquent non-blocking code: the Every construct</span></a></li><li><a href="https://eloquentarduino.github.io/2019/12/how-to-install-the-eloquent-library/"><span class="crp_title">How to install the Eloquent library</span></a></li></ul><div class="crp_clear"></div></div><div id="disqus_thread"></div></div><div class="clear"></div></div></div></div><div class="post-meta-bottom"><div class="post-cat-tags"><p class="post-categories"><span>Categories:</span> <a href="https://eloquentarduino.github.io/category/programming/eloquent-library/" rel="category tag">Eloquent library</a></p></div><div class="archive-nav post-nav"> <a class="post-nav-older" title="Previous post: Morse alphabet identification on Arduino with Machine learning" href="https://eloquentarduino.github.io/2019/12/morse-identification-on-arduino/"> « Morse alphabet identification on Arduino with Machine learning </a> <a class="post-nav-newer" title="Next post: How to do Gesture identification through machine learning on Arduino" href="https://eloquentarduino.github.io/2019/12/how-to-do-gesture-identification-on-arduino/"> How to do Gesture identification through machine learning on Arduino » </a><div class="clear"></div></div></div><p class="nocomments">Comments are closed.</p><div class="footer section large-padding bg-dark"><div class="clear"></div></div><div class="credits"><div class="credits-inner"><p class="credits-left">© 2020 <a href="https://eloquentarduino.github.io" title="Eloquent Arduino Blog">Eloquent Arduino Blog</a></p><p class="credits-right"><span>Theme by <a href="https://www.andersnoren.se">Anders Norén</a></span> — <a title="To the top" class="tothetop">Up ↑</a></p><div class="clear"></div></div></div></div><div class="clear"></div></div><link href="https://fonts.googleapis.com/css?family=Lato:400,700&display=swap" rel="stylesheet"> <script src="//cdn.jsdelivr.net/algoliasearch/3/algoliasearch.min.js"></script> <script src="//cdn.jsdelivr.net/autocomplete.js/0/autocomplete.min.js"></script>  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-154550080-1"></script> <script>if (window.location.href.indexOf("eloquent.blog") < 0) {
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'UA-154550080-1');
}</script>  <script>(function() {
setTimeout(function() {
  var d = document, s = d.createElement('script');
  s.src = 'https://eloquent-arduino.disqus.com/embed.js';
  s.setAttribute('data-timestamp', +new Date());
  (d.head || d.body).appendChild(s);},
10000);
})();</script>   <script src="/assets/app.js"></script> <script type="text/javascript">/*  */
var highlight_and_share = {"show_facebook":"1","show_twitter":"1","show_linkedin":"1","show_pinterest":"","show_email":"","show_xing":"","show_copy":"","show_whatsapp":"","twitter_username":"EloquentArduino","twitter_fa_class":"fa fa-twitter","facebook_fa_class":"fa fa-facebook","linkedin_fa_class":"fa fa-linkedin","pinterest_fa_class":"fa fa-pinterest","xing_fa_class":"fa fa-xing","whatsapp_fa_class":"fa fa-whatsapp","copy_fa_class":"fa fa-copy","email_fa_class":"fa fa-envelope","mobile":"","content":".has-content-area","tweet_text":"Tweet","facebook_text":"Share","linkedin_text":"LinkedIn","pinterest_text":"Pinterest","whatsapp_text":"WhatsApp","xing_text":"Xing","copy_text":"Copy","email_text":"E-mail","icons":"1","facebook_app_id":"2530754057166153","email_your_name_value":"","email_from_value":"","nonce":"00d04569b8","ajax_url":"https:\/\/eloquentarduino.github.io\/wp-admin\/admin-ajax.php","email_share":"Share This Post Via Email","email_subject":"Your Subject","email_your_name":"Your Name","email_send_email":"Send to Email Address","email_subject_text":"[Shared Post] %title%","email_from":"Your Email Address","email_send":"Send Email","email_cancel":"Cancel","email_close":"Close","email_loading":"https:\/\/eloquentarduino.github.io\/wp-content\/plugins\/highlight-and-share\/img\/loading.gif","email_subject_error":"You must fill in a subject.","email_email_to":"Send to Email Address is blank.","email_email_from":"Your email address is blank.","email_email_name":"Your name is blank.","email_sending":"Sending...","customizer_preview":""};
/*  */</script> <script type="text/javascript" src="https://eloquentarduino.github.io/wp-content/uploads/cache/fvm/1580312644/out/footer-86b22de7.min.js"></script><script>/* loadCSS. [c]2017 Filament Group, Inc. MIT License */
(function(w){if(!w.loadCSS)w.loadCSS=function(){};var rp=loadCSS.relpreload={};rp.support=function(){var ret;try{ret=w.document.createElement("link").relList.supports("preload")}catch(e){ret=false}return function(){return ret}}();rp.bindMediaToggle=function(link){var finalMedia=link.media||"all";function enableStylesheet(){if(link.addEventListener)link.removeEventListener("load",enableStylesheet);else if(link.attachEvent)link.detachEvent("onload",enableStylesheet);link.setAttribute("onload",null);link.media=finalMedia}if(link.addEventListener)link.addEventListener("load",enableStylesheet);else if(link.attachEvent)link.attachEvent("onload",enableStylesheet);setTimeout(function(){link.rel="stylesheet";link.media="only x"});setTimeout(enableStylesheet,3E3)};rp.poly=function(){if(rp.support())return;var links=w.document.getElementsByTagName("link");for(var i=0;i<links.length;i++){var link=links[i];if(link.rel==="preload"&&link.getAttribute("as")==="style"&&!link.getAttribute("data-loadcss")){link.setAttribute("data-loadcss", true);rp.bindMediaToggle(link)}}};if(!rp.support()){rp.poly();var run=w.setInterval(rp.poly,500);if(w.addEventListener)w.addEventListener("load",function(){rp.poly();w.clearInterval(run)});else if(w.attachEvent)w.attachEvent("onload",function(){rp.poly();w.clearInterval(run)})}if(typeof exports!=="undefined")exports.loadCSS=loadCSS;else w.loadCSS=loadCSS})(typeof global!=="undefined"?global:this);</script> </body></html>
